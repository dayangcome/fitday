<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" href="../../../../public/plugins/element-ui/index.css" />
    <title>Document</title>
    <style>
        .containor{
            display: flex;
            margin: 8px 8px;
            height: 745px;
        }
        .left{
            display: inline-block;
            width: 190px;
            height: 785px;
            background-color: white;
            border-radius:5px;
        }
        .button_dialog{
            width: 60px;
            height: 35px;
        }
        .hide{
            display: none;
        }
        .el-card__body{
            padding: 0;
        }
        .c1{
            position: fixed;
            top:0;
            bottom: 0;
            left:0;
            right: 0;
            background: rgba(0,0,0,.5);
            z-index: 2;
        }
        .c2{
            background-color: white;
            position: fixed;
            width: 420px;
            height: 220px;
            top:50%;
            left: 50%;
            z-index: 3;
            margin-top: -150px;
            margin-left: -200px;
        }
		#modal p {
			margin-left:80px;
		}
        .center{
            display: inline-block;
            width: 675px;
            height: 745px;
            background-color:  #fff;
            vertical-align: top;
            margin-left: 5px;

        }
        .center_top{
            display: inline-block;
            width: 675px;
            height: 150px;
            margin-left: 10px;
            background-color:#fff;
            border-radius:5px;
        }
        .center_bottom{
            overflow-y:auto;
            width: 675px;
            height: 584px;
            margin-top: 10px;
            margin-left: 10px;
            overflow-x: hidden;
            border-radius:5px;
            vertical-align: top;
        }
        .center_bottom_item{
            display: inline-block;
            width: 675px;
            height: 290px;
            margin-top: 10px;
            background-color: white;
            border-radius:5px;
            vertical-align: top;
           
        }
        .person_picture_site{
            vertical-align: top;
            width: 40px; 
            height: 40px; 
            display: inline-block;
             margin-left: 5px;
             margin-top: 5px; 
        }
        .person_picture{
            vertical-align: top;
            width: 40px; 
            height: 40px; 
            display: inline-block;
             margin-left: 2px; 
             margin-top: 5px; 
        }
        .info_send{
            width:655px;
            height: 150px;
            background-color: white;
            display: inline-block;
            border-radius:5px;
        }
        .comment{
            display: inline-block; 
            width: 530px;
            height: 30px; 
            margin-left: 5px; 
            margin-top: 125px; 
            border-radius:5px; 
            resize: none; 
        }
        .right{
            display: inline-block;
            width: 220px;
            height: 784px;
            background-color: #fff;
            vertical-align: top;
            margin-left: 5px;
            overflow: hidden;
        }
        .right_group_name{
            margin-top: 20px;
            width: 220px;
            height: 100px;
            background-color: white;
            border-radius:5px;
        }
        .right_group_mark{
            width: 220px;
            background-color: white;
            border-radius:5px;
            margin-top: 10px;
            overflow-y:auto;
        }
        .right_mark_detail{
            display: block;
            color: skyblue;
            text-decoration: none;
            font-size: 20px;
            text-align: center;
        }
        .right_info{
            width: 220px;
            height: 150px;
            background-color: white;
            border-radius:5px;
            margin-top: 10px;
            overflow-y:auto;
        }
        .el-menu-item{
            font-size: 16px;
        }
        .right_rank{
            margin-top: 10px;
            height: 341px;
            background-color:white;
            border-radius:5px;
            width: 226px;
            overflow: auto;
        }
        .person{
            width: 200px;
            height: 60px;
            margin-top: 3px;
            background-color: white;
        }
        .el-divider{
            height: 1px;
            color: #e2e2e2;
        }

        .el-textarea__inner{
            font-size: 16px;
            color: #111111;
        }
        .el-checkbox{
            font-size: 16px;
            margin-bottom: 8px;
        }
    </style>
</head>

<body>
    
    <div class="containor" id="app">
        <div style="width: 200px;   display: inline-block;">
            
        </div>

        <div class="left" style="box-shadow: 4px 4px 8px rgba(0, 0, 0, .1), -4px -4px 8px rgba(0, 0, 0, .1);">
            <br>
            <div>
                <a style="color: black; text-decoration: none; font-size: 25px;" href="#" target="_blank"></a>
            </div>
                <el-menu
                        default-active="7"
                        class="el-menu-vertical-demo"
                        @select="handleSelect"
                >
                    <el-menu-item index="0">
                        <i class="el-icon-data-board"></i>
                        <span slot="title">小组成员</span>
                    </el-menu-item>
                    <el-menu-item index="6">
                        <i class="el-icon-setting"></i>
                        <span slot="title">入群申请</span>
                    </el-menu-item>
                    <el-menu-item index="1">
                        <i class="el-icon-data-board"></i>
                        <span slot="title">小组搜索</span>
                    </el-menu-item>
                    <el-menu-item index="2">
                        <i class="el-icon-soccer"></i>
                        <span slot="title">修改名称</span>
                    </el-menu-item>
                    <el-menu-item index="3">
                        <i class="el-icon-food"></i>
                        <span slot="title">修改标签</span>
                    </el-menu-item>
                    <el-menu-item index="4">
                        <i class="el-icon-setting"></i>
                        <span slot="title">修改公告</span>
                    </el-menu-item>
                    <el-menu-item index="5">
                        <i class="el-icon-setting"></i>
                        <span slot="title">解散小组</span>
                    </el-menu-item>
                </el-menu>
<!--            <a style="color: black; text-decoration: none; font-size: 22px; margin-left: 42px;" href="../search/search1.html" target="_blank" >小组搜索</a>-->
<!--            <br><br>-->
<!--            <a style="color: black; text-decoration: none; font-size: 22px; margin-left: 42px;" target="_blank" onclick="Show_name();">修改名称</a>-->
<!--            <br><br>-->
<!--            <a style="color: black; text-decoration: none; font-size: 22px; margin-left: 42px;" target="_blank" onclick="Show_mark();">修改标签</a>-->
<!--            <br><br>-->
<!--            <a style="color: black; text-decoration: none; font-size: 22px; margin-left: 42px;" target="_blank" onclick="Show_info();">修改公告</a>-->
<!--            <br><br>-->
<!--            <a style="color: black; text-decoration: none; font-size: 22px; margin-left: 42px;" target="_blank" onclick="Show_release();">解散小组</a>-->
            </el-card>
        </div>


        <el-dialog
                title="小组成员"
                :visible.sync="centerDialogVisible"
                width="30%"
                center>
            <div>
                <h2>组长</h2>
                <div>
                    <el-avatar :size="50" :src="mygroup.leaderavatar"></el-avatar>
                    <div>{{mygroup.leadername}}</div>
                </div>

            </div>
            <div>
                <h2>副组长</h2>
                <el-avatar :size="50" :src="circleUrl"></el-avatar>
            </div>
            <div>
                <h2>小组成员</h2>
                <el-avatar :size="50" :src="circleUrl"></el-avatar>
            </div>
            <span slot="footer" class="dialog-footer">
                <el-button @click="centerDialogVisible = false">取 消</el-button>
                <el-button type="primary" @click="centerDialogVisible = false">确 定</el-button>
            </span>
        </el-dialog>
        <el-dialog
                title="修改小组名称"
                :visible.sync="changename"
                width="30%"
               >
            <el-input
                    placeholder="请输入新的小组名称"
                    v-model="newname"
                    maxlength="20"
                    clearable>
            </el-input>
            <span slot="footer" class="dialog-footer">
    <el-button @click="changename = false">取 消</el-button>
    <el-button type="primary" @click="mychange(1)">确 定</el-button>
  </span>
        </el-dialog>

        <el-dialog
                title="修改小组标签"
                :visible.sync="changetag"
                width="30%"
                >
            <span>请选择新的小组标签</span>
            <el-checkbox-group v-model="checklist" style="display: flex;flex-wrap: wrap;margin-top: 10px;">
                <el-checkbox label="篮球"></el-checkbox>
                <el-checkbox label="排球"></el-checkbox>
                <el-checkbox label="足球"></el-checkbox>
                <el-checkbox label="跳绳"></el-checkbox>
                <el-checkbox label="健身"></el-checkbox>
                <el-checkbox label="跑步"></el-checkbox>
                <el-checkbox label="瑜伽"></el-checkbox>
                <el-checkbox label="舞蹈"></el-checkbox>
                <el-checkbox label="骑行"></el-checkbox>
                <el-checkbox label="体操"></el-checkbox>
                <el-checkbox label="羽毛球"></el-checkbox>
                <el-checkbox label="乒乓球"></el-checkbox>
                <el-checkbox label="俯卧撑"></el-checkbox>
                <el-checkbox label="引体向上"></el-checkbox>
                <el-checkbox label="仰卧起坐"></el-checkbox>
            </el-checkbox-group>
            <span slot="footer" class="dialog-footer">
    <el-button @click="changetag = false">取 消</el-button>
    <el-button type="primary" @click="mychange(2)">确 定</el-button>
  </span>
        </el-dialog>

        <el-dialog
                title="修改公告"
                :visible.sync="changeshow"
                width="30%"
        >
            <el-input
                    type="textarea"
                    placeholder="请输入内容"
                    :autosize="{ minRows: 2, maxRows: 5}"
                    v-model="theshow"
                    maxlength="200"
                    show-word-limit
            >
            </el-input>
            <span slot="footer" class="dialog-footer">
    <el-button @click="changeshow = false">取 消</el-button>
    <el-button type="primary" @click="mychange(3)">确 定</el-button>
  </span>
        </el-dialog>


        <div id="shade_release" class="c1 hide"></div>
        <div id="modal_release" class="c2 hide">
            <div style="text-align: center; font-size: 25px; margin:10px">小组解散</div>
            <p style="font-size: 20px; text-align: center; margin-top: 48px;">你确定要解散小组吗？</p>
        <p style="text-align: center; margin-top: 50px;">
            <input class="button_dialog" type="button" value="确定">
            <input class="button_dialog" type="button" style="margin-left: 8px;" value="取消" onclick="Hide_release();">
        </p>
        </div>
        </el-card>

        <div class="center" style="box-shadow: 4px 4px 8px rgba(0, 0, 0, .1), -4px -4px 8px rgba(0, 0, 0, .1);">
            <el-card class="box-card">
            <div class="center_top">
                    <div class="info_send">
                        
                        <div style="margin-bottom: 5px">
                            <textarea class="el-textarea__inner" v-model="mytext" style="width: 640px; height: 76px; margin-left: 5px; margin-top: 5px; border-radius:5px; resize: none; " placeholder="有什么有趣的事分享给大家？"></textarea>
                        </div>
                        <div style="display: inline-block;"><label><a style="display: inline-block; width: 40px; height: 40px;" href="https://imgse.com/i/pSylOJS"><img style="width: 40px; height: 40px;" src="pic2.png" alt="pSylOJS.jpg" border="0" /></a><div style="display: inline-block;  vertical-align:top; margin-top: 8px;">话题</div></label></div>
                        <div style="display: inline-block;"><label><a style="display: inline-block; width: 40px; height: 40px;" href="https://imgse.com/i/pSylOJS"><img style="width: 40px; height: 40px;" src="pic1.png" alt="pSylOJS.jpg" border="0" /></a><div style="display: inline-block; vertical-align:top; margin-top: 8px;">图片</div></label></div>
                        <div style="display: inline-block; float: right; width: 90px; height: 40px;" @click="mysend"> <el-button type="primary" plain>发布</el-button></div>
                    </div>
            </div>
                <el-divider></el-divider>
            <div class="center_bottom"  >
                <div v-for="item in dylist" class="center_bottom_item" style="margin-top: 0px;">
                    <div>
                        <div class="person_picture_site" ><img style="width: 40px; height: 40px;border-radius: 50%" :src="item.avatar" alt="" title=""></div>
                        <div style="display: inline-block; ">
                            <div style=" font-size: 15px; margin-top: 4px;">{{item.name}}</div>
                            <div style=" font-size: 15px; margin-top: 4px;">{{item.createdate.toLocaleString().replace(/T/g, ' ').replace(/\.[\d]{3}Z/, '')}}</div>
                        </div>
                    </div>
                    <div style="font-size: 20px; margin-top: 2px; margin-left:3px">{{item.content}}</div>
                    <div style=" vertical-align: top;width: 40px; height: 40px; display: inline-block; margin-left: 5px; margin-top: 5px; "><img style="width: 200px; height: 140px;" src="R-C.jpg" alt="" title=""></div>
                    <div>
                        <textarea  type="text" class="comment el-textarea__inner"   placeholder="写下评论"></textarea>
                        <div style="display: inline-block; width: 90px; height: 40px; margin-left: 2px; margin-top: 3px;"><el-button type="primary" plain>发送</el-button></div>
                    </div>
                </div>
            </div>
            </el-card>
        </div>    


        <div class="right" style="box-shadow: 4px 4px 8px rgba(0, 0, 0, .1), -4px -4px 8px rgba(0, 0, 0, .1);">
            <div class="right_group_name">
                <div style="font-size: 25px; text-align: center;">小组名称</div>
                <div style="font-size: 20px;font-weight: 550; text-align: center;">{{mygroup.name}}</div>
            </div>
            <el-divider></el-divider>
            <div class="right_group_mark">
                <div style="font-size: 25px; text-align: center;">小组标签</div>

                <a v-for="item in gtags" class="right_mark_detail">{{item}}</a>
            </div>
                <el-divider></el-divider>
            <div class="right_info">
                <div style="font-size: 25px; text-align: center;">小组公告</div>

                <div style="font-size: 20px; margin-left: 3px;">{{mygroup.introduction}}</div>
            </div>
                <el-divider></el-divider>
            <div class="right_rank">
                <div style="font-size: 25px; text-align: center;">计划完成排行榜</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp;&nbsp; 1 &nbsp;&nbsp;</div>  <div class="person_picture"><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div> 张三</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp&nbsp 2 &nbsp&nbsp</div>  <div class="person_picture" ><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div> 李四</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp&nbsp 3 &nbsp&nbsp</div>  <div class="person_picture"><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div>  王五</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp&nbsp 4 &nbsp&nbsp</div>  <div class="person_picture"><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div>  刘六</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp&nbsp 5 &nbsp&nbsp</div>  <div class="person_picture"><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div>  杨七</div>
                <el-divider></el-divider>
                <div class="person">  <div style="font-size: 26px; display: inline-block;" >&nbsp&nbsp 6 &nbsp&nbsp</div>  <div class="person_picture"><img style="width: 40px; height: 40px;" src="b.jpg" alt="" title=""></div>  黄八</div>
            </div>
        </div>
        <div style="width: 200px;   display: inline-block;">
            
        </div>
    </div>

    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="../../../../public/plugins/vue/vue.js"></script>
    <!-- 引入组件库 -->
    <script src="../../../../public/plugins/element-ui/index.js"></script>
    <script src="../../../../public/plugins/axios/axios.min.js"></script>
    <script src="../../../../public/js/request.js"></script>
    <script src="../../../myapi/group.js"></script>
    <script>
        new Vue({
            el: '#app',
            data() {
                return {
                    mygroup: {},
                    userInfo:{},
                    userInfo2:{},
                    gtags:[],
                    centerDialogVisible:false,
                    circleUrl:"",
                    circleUrl2:"",
                    circleUrl3:"",
                    changename:false,
                    newname:'',
                    changetag:false,
                    checklist:[],
                    changeshow:false,
                    theshow:'',
                    mytext:'',
                    dylist:[]
                }
            },
            computed: {},
            created() {
                var userInfo = window.localStorage.getItem('userInfo')
                userInfo = JSON.parse(userInfo)
                this.userInfo=userInfo
                var userInfo2 = window.localStorage.getItem('userInfo2')
                userInfo2 = JSON.parse(userInfo2)
                this.userInfo2=userInfo2
                this.mygroup=JSON.parse(window.localStorage.getItem("mygroup"))
                window.localStorage.removeItem("mygroup")
                this.gtags=this.mygroup.tags.split(' ')
                this.gtags.pop()

            },
            mounted() {
                window.parent.postMessage(document.body.clientHeight-100,'*')
                this.newname=this.mygroup.name
                this.checklist=this.gtags
                this.theshow=this.mygroup.introduction
                this.init()
            },
            methods: {
                mysend(){
                    addmysend(this.userInfo.uid,this.mygroup.id,this.mytext).then(res=>{
                        if(String(res.code) === '1'){
                            this.$message.success("发布成功")
                            this.init()
                            this.mytext=''
                        }else {
                            this.$message.error("发布失败")
                        }
                    })
                },
                mychange(num){
                    let str=''
                    for(let i=0;i<this.checklist.length;i++){
                        str+=this.checklist[i]
                        str+=' '
                    }
                    const params = {
                        id: this.mygroup.id,
                        name: this.newname,
                        introduction: this.theshow,
                        tags:str
                    }
                    if(this.checklist.length<1){
                        this.$message.warning("请至少选择一个标签！")
                    }else if(this.checklist.length>5){
                        this.$message.warning("最多选择5个标签！")
                    }else{
                        changeinfo(params).then(res=>{
                            if(String(res.code) === '1'){
                                this.$message.success("修改成功")
                                if(num==1){
                                    this.mygroup.name=this.newname
                                    this.changename=false
                                }else if(num==2){
                                    this.gtags=this.checklist
                                    this.changetag=false
                                }else if(num==3){
                                    this.mygroup.introduction=this.theshow
                                    this.changeshow=false
                                }
                            }else {
                                this.$message.error("修改失败")
                            }
                        })
                    }
                },
                init(){
                    getinfo(this.mygroup.id).then(res=>{
                        if(String(res.code) === '1'){
                            this.dylist=res.data
                        }else {
                            this.$message.error("发布失败")
                        }
                    })
                },
                newmy(){
                    window.location.href="../new/create1.html"
                },
                navto2(){
                    window.location.href="./me.html"
                },
                handleSelect(key, keyPath) {
                    console.log(key)
                    if(key==0){
                        this.centerDialogVisible=true
                    }
                    if(key==2){
                        this.changename=true;
                    }
                    if(key==3){
                        this.changetag=true
                    }
                    if(key==4){
                        this.changeshow=true
                    }
                },
            }
        })
    </script>
</body>
</html>